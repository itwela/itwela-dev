{"version":3,"sources":["../src/helpers.ts"],"sourcesContent":["/**\n * Copyright 2023 Design Barn Inc.\n */\n\nexport class Stack<T, K extends { i: number } = { i: number }> {\n  private readonly _keys: K[] = [];\n\n  private readonly _storage = new WeakMap<K, T>();\n\n  public constructor(private readonly _capacity: number = Infinity) {}\n\n  public peek(): T | undefined {\n    const size = this.size();\n    const key = this._keys[size - 1];\n\n    return key ? this._storage.get(key) : undefined;\n  }\n\n  public pop(): T | undefined {\n    const key = this._keys.pop();\n\n    if (key === undefined) {\n      return undefined;\n    } else {\n      const item = this._storage.get(key);\n\n      this._storage.delete(key);\n\n      return item;\n    }\n  }\n\n  public push(item: T): void {\n    if (this.size() === this._capacity) {\n      throw Error('Stack has reached max capacity, you cannot add more items');\n    }\n\n    const key = { i: this._keys.length } as K;\n\n    this._storage.set(key, item);\n    this._keys.push(key);\n  }\n\n  public size(): number {\n    return this._keys.length;\n  }\n}\n"],"mappings":"wKAIO,GAAM,GAAN,KAAwD,CAK7D,AAAO,YAA6B,EAAoB,IAAU,CAA9B,iBAJpC,OAAiB,QAAa,CAAC,GAE/B,OAAiB,WAAW,GAAI,SAEmC,CAEnE,AAAO,MAAsB,CAC3B,GAAM,GAAO,KAAK,KAAK,EACjB,EAAM,KAAK,MAAM,EAAO,GAE9B,MAAO,GAAM,KAAK,SAAS,IAAI,CAAG,EAAI,MACxC,CAEA,AAAO,KAAqB,CAC1B,GAAM,GAAM,KAAK,MAAM,IAAI,EAE3B,GAAI,IAAQ,OAEL,CACL,GAAM,GAAO,KAAK,SAAS,IAAI,CAAG,EAElC,YAAK,SAAS,OAAO,CAAG,EAEjB,CACT,CACF,CAEA,AAAO,KAAK,EAAe,CACzB,GAAI,KAAK,KAAK,IAAM,KAAK,UACvB,KAAM,OAAM,2DAA2D,EAGzE,GAAM,GAAM,CAAE,EAAG,KAAK,MAAM,MAAO,EAEnC,KAAK,SAAS,IAAI,EAAK,CAAI,EAC3B,KAAK,MAAM,KAAK,CAAG,CACrB,CAEA,AAAO,MAAe,CACpB,MAAO,MAAK,MAAM,MACpB,CACF","names":[]}