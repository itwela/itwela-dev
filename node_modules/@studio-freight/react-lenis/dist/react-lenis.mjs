import{useFrame as r}from"@studio-freight/hamo";import e from"@studio-freight/lenis";import t from"clsx";import n,{createContext as o,useEffect as l,forwardRef as a,useRef as c,useState as s,useCallback as i,useImperativeHandle as u,useContext as f}from"react";import{create as p}from"zustand";"function"==typeof SuppressedError&&SuppressedError;const m=o(),d=p((()=>({})));function b(r,e=[],t=0){const{lenis:n,addCallback:o,removeCallback:a}=function(){const r=f(m),e=d();return null!=r?r:e}();return l((()=>{if(r&&o&&a&&n)return o(r,t),r(n),()=>{a(r)}}),[n,o,a,t,...e]),n}const y=a(((o,a)=>{var{children:f,root:p=!1,options:b={},autoRaf:y=!0,rafPriority:v=0,className:O}=o,g=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(r);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(r,n[o])&&(t[n[o]]=r[n[o]])}return t}(o,["children","root","options","autoRaf","rafPriority","className"]);const h=c(),k=c(),[N,j]=s(),w=c([]),C=i(((r,e)=>{w.current.push({callback:r,priority:e}),w.current.sort(((r,e)=>r.priority-e.priority))}),[]),E=i((r=>{w.current=w.current.filter((e=>e.callback!==r))}),[]);u(a,(()=>({wrapper:h.current,content:k.current,lenis:N})),[N]),l((()=>{const r=new e(Object.assign(Object.assign({},b),!p&&{wrapper:h.current,content:k.current}));return j(r),()=>{r.destroy(),j(void 0)}}),[p,JSON.stringify(b)]),r((r=>{y&&(null==N||N.raf(r))}),v),l((()=>{p&&N&&d.setState({lenis:N,addCallback:C,removeCallback:E})}),[p,N,C,E]);const P=i((r=>{for(let e=0;e<w.current.length;e++)w.current[e].callback(r)}),[]);l((()=>(null==N||N.on("scroll",P),()=>{null==N||N.off("scroll",P)})),[N,P]);const S=i((()=>{h.current&&(h.current.className=t(null==N?void 0:N.className,O))}),[N,O]);return l((()=>(S(),null==N||N.on("className change",S),()=>{null==N||N.off("className change",S)})),[N,S]),n.createElement(m.Provider,{value:{lenis:N,addCallback:C,removeCallback:E}},p?f:n.createElement("div",Object.assign({ref:h,className:t(null==N?void 0:N.className,O)},g),n.createElement("div",{ref:k},f)))}));export{y as Lenis,m as LenisContext,y as ReactLenis,y as default,b as useLenis};
//# sourceMappingURL=react-lenis.mjs.map
