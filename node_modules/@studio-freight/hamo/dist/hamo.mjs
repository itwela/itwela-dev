import{useCallback as n,useEffect as e,useState as t,useMemo as r,useRef as o}from"react";import i from"@studio-freight/tempus";import c from"just-debounce-it";import{create as u}from"zustand";import{createNanoEvents as a}from"nanoevents";function f(t,r){var o=n(function(n){t.current&&!t.current.contains(n.target)&&r()},[t,r]);e(function(){if(t.current)return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}},[o,t])}function d(){var n=t(!1),r=n[0],o=n[1];return e(function(){o(!0)},[]),r}function s(){var n=d();return r(function(){if(n){var e=window.location,t=e.href,r=new URLSearchParams(e.search),o=t.includes("#debug")||t.includes("/_debug")||r.has("debug")||"development"===process.env.NODE_ENV,i=t.includes("#production")||r.has("production");return o&&!i}},[n])}function v(){var n=t(),r=n[0],o=n[1];return e(function(){function n(){o(document.readyState)}return document.addEventListener("readystatechange",n,!1),n(),function(){return document.removeEventListener("readystatechange",n,!1)}},[]),r}function l(n,t){void 0===t&&(t=0),e(function(){if(n)return i.add(n,t),function(){return i.remove(n)}},[n,t])}function m(r,i){var c=void 0===r?{}:r,u=c.root,a=void 0===u?null:u,f=c.rootMargin,d=void 0===f?"0px":f,s=c.threshold,v=void 0===s?0:s,l=c.once,m=void 0!==l&&l,h=c.lazy,p=void 0!==h&&h,w=c.callback,b=void 0===w?function(){}:w;void 0===i&&(i=[]);var g=o({}),y=t({}),E=y[0],z=y[1],P=t(),L=P[0],k=P[1];e(function(){if(L){var n=new IntersectionObserver(function(e){var t=e[0];p?g.current=t:z(t),b(t),m&&t.isIntersecting&&n.disconnect()},{root:a,rootMargin:d,threshold:v});return n.observe(L),function(){n.disconnect()}}},[L,a,d,v,p,m].concat(i));var S=n(function(){return g.current},[]);return[k,p?S:E]}function h(n,t,r){void 0===t&&(t=1e3),void 0===r&&(r=[]),e(function(){var e=setInterval(n,t);return function(){return clearInterval(e)}},[t].concat(r))}function p(){var n=t(),r=n[0],o=n[1];return e(function(){function n(){o("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)}return window.addEventListener("resize",n,!1),n(),function(){window.removeEventListener("resize",n,!1)}},[]),r}function w(n){var r=t(),o=r[0],i=r[1];return e(function(){var e=window.matchMedia(n);function t(){i(e.matches)}return e.addEventListener("change",t,!1),t(),function(){return e.removeEventListener("change",t,!1)}},[n]),o}function b(){return b=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},b.apply(this,arguments)}function g(r,i){var u=void 0===r?{}:r,a=u.lazy,f=void 0!==a&&a,d=u.debounce,s=void 0===d?500:d,v=u.box,l=void 0===v?"border-box":v,m=u.callback,h=void 0===m?function(){}:m;void 0===i&&(i=[]);var p=o({}),w=t({}),b=w[0],g=w[1],y=t(),E=y[0],z=y[1];e(function(){if(E){var n=c(function(n){var e=n[0];p.current=e,h(e),f||g(e)},s,!0),e=new ResizeObserver(n);return e.observe(E,{box:l}),function(){e.disconnect(),n.cancel()}}},[E,f,s,l].concat(i));var P=n(function(){return p.current},[]);return[z,f?P:b]}function y(n){"sticky"===getComputedStyle(n).position&&(n.style.setProperty("position","static"),n.dataset.sticky="true"),n.offsetParent&&y(n.offsetParent)}function E(n){var e;"true"===(null==n||null==(e=n.dataset)?void 0:e.sticky)&&(n.style.removeProperty("position"),n.dataset.sticky="true",delete n.dataset.sticky),n.parentNode&&E(n.parentNode)}function z(n,e){void 0===e&&(e=0);var t=e+n.offsetTop;return n.offsetParent?z(n.offsetParent,t):t}function P(n,e){void 0===e&&(e=0);var t=e+n.offsetLeft;return n.offsetParent?P(n.offsetParent,t):t}function L(n,e){void 0===e&&(e=0);var t=e+n.scrollTop;return n.offsetParent?L(n.offsetParent,t):t+window.scrollY}function k(n,e){void 0===e&&(e=0);var t=e+n.scrollLeft;return n.offsetParent?k(n.offsetParent,t):t+window.scrollX}var S=u(function(n){return{elements:[],addElement:function(e){n(function(n){return{elements:[].concat(n.elements,[e])}})},removeElement:function(e){n(function(n){return{elements:n.elements.filter(function(n){return n!==e})}})}}}),x=a();function O(r){var i=void 0===r?{}:r,u=i.ignoreTransform,a=void 0!==u&&u,f=i.ignoreSticky,d=void 0===f||f,s=i.lazy,v=void 0!==s&&s,l=i.debounce,m=void 0===l?500:l,h=i.callback,p=void 0===h?function(){}:h,w=t(),O=w[0],M=w[1],R=t({}),T=R[0],j=R[1],B=o({}),I=n(function(n){var e=n.borderBoxSize[0].blockSize;B.current.width=n.borderBoxSize[0].inlineSize,B.current.height=e,p(B.current),v||j(b({},B.current))},[v]),N=g({lazy:!0,debounce:m,callback:I},[m,I])[0],C=S(function(n){return n.elements}),H=n(function(){if(O){var n,e;if(d&&y(O),a)n=z(O),e=P(O);else{var t=O.getBoundingClientRect();n=t.top+L(O),e=t.left+k(O)}d&&E(O),B.current.top=n,B.current.left=e,p(B.current),v||j(b({},B.current))}},[a,d,v,O]);e(function(){var n=c(H,m,!0),e=new ResizeObserver(n);return e.observe(document.body),C.forEach(function(n){e.observe(n)}),function(){e.disconnect(),n.cancel()}},[C,m,H]);var W=n(function(){return B.current},[]);return e(function(){return x.on("resize",function(){if(O){var n=O.getBoundingClientRect();B.current.width=n.width,B.current.height=n.height,H()}})},[O,H]),[function(n){M(n),N(n)},v?W:T]}function M(n,e){void 0===n&&(n=[]),void 0===e&&(e=[]);var t=r(function(){return e&&[e].flat()},[e]),o=r(function(){return n&&[n].flat()},[n]);return r(function(){if(t&&o){var e=o.map(function(n){var e;return null==(e=t.find(function(e){return e.type===n}))?void 0:e.props.children});return n[0]?e:e[0]}},[t,o])}function R(n){void 0===n&&(n=500);var r=t(),o=r[0],i=r[1],u=t(),a=u[0],f=u[1];return e(function(){var e=c(function(){i(Math.min(window.innerWidth,document.documentElement.clientWidth)),f(Math.min(window.innerHeight,document.documentElement.clientHeight))},n,!0);return window.addEventListener("resize",e,!1),e(),function(){return window.removeEventListener("resize",e,!1)}},[n]),{width:o,height:a}}O.observe=function(n){S.getState().addElement(n)},O.unobserve=function(n){S.getState().removeElement(n)},O.resize=function(){x.emit("resize")};export{s as useDebug,v as useDocumentReadyState,l as useFrame,m as useIntersectionObserver,h as useInterval,d as useIsClient,p as useIsTouchDevice,w as useMediaQuery,f as useOutsideClickEvent,O as useRect,g as useResizeObserver,M as useSlots,R as useWindowSize};
//# sourceMappingURL=hamo.mjs.map
