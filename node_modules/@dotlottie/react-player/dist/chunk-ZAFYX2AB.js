import { a, e, d } from './chunk-XVC7DH25.js';
import { PlayerState, PlayerEvents, DotLottieCommonPlayer, DEFAULT_STATE } from '@dotlottie/common';
import c, { useRef, useEffect, useState, useCallback, useLayoutEffect } from 'react';

var Z=typeof window>"u"?useEffect:useLayoutEffect,H=(e,o,d)=>{let[a]=useState(()=>new DotLottieCommonPlayer(e,o.current,d)),u=useRef(!1);return Z(()=>{async function m(){!u.current&&o.current&&(u.current=!0,a.setContainer(o.current),await a.load());}return m(),()=>{u.current&&a.destroy();}},[a]),a};function L(e,o){let d$1=useCallback(()=>o(e.getState()),[o,e]),a=useCallback(m=>e.state.subscribe(m),[e]);return d(a,d$1,()=>o(DEFAULT_STATE))}var N={animation:{position:"relative",width:"100%",height:"100%"},animationWithControls:{position:"relative"}},fe=c.forwardRef(({onEvent:e$1,activeAnimationId:o,autoplay:d,background:a$1="transparent",direction:u,intermission:m,loop:D,playMode:P,hover:f,speed:g,renderer:U="svg",rendererSettings:$={},src:S,className:j="",testId:p,children:b,defaultTheme:y,light:v=!1,worker:z=!1,activeStateId:C,lottieRef:B,...I},W)=>{let R=useRef(null),i=H(S,R,{renderer:U,activeAnimationId:o,rendererSettings:{clearCanvas:!0,progressiveLoad:!1,hideOnTransparent:!0,...$},hover:f,loop:D,direction:u,speed:g,intermission:m,background:a$1,playMode:P,autoplay:f?!1:d,testId:p,defaultTheme:y,light:v,worker:z,activeStateId:C}),t=useRef(i);t.current=i,c.useImperativeHandle(W,()=>i,[i]),c.useImperativeHandle(B,()=>i,[i]);let T=L(i,n=>n.currentState),k=L(i,n=>n.frame),q=L(i,n=>n.seeker),G=L(i,n=>n.currentAnimationId);return a(()=>{typeof D>"u"?t.current.revertToManifestValues(["loop"]):t.current.setLoop(D);},[D]),a(()=>{[PlayerState.Initial,PlayerState.Loading].includes(T)||(typeof d>"u"?t.current.revertToManifestValues(["autoplay"]):t.current.setAutoplay(d));},[d]),a(()=>{typeof u>"u"?t.current.revertToManifestValues(["direction"]):t.current.setDirection(u);},[u]),a(()=>{typeof g>"u"?t.current.revertToManifestValues(["speed"]):t.current.setSpeed(g);},[g]),a(()=>{typeof P>"u"?t.current.revertToManifestValues(["playMode"]):t.current.setMode(P);},[P]),a(()=>{typeof f>"u"?t.current.revertToManifestValues(["hover"]):t.current.setHover(f);},[f]),a(()=>{typeof a$1>"u"?t.current.setBackground("transparent"):t.current.setBackground(a$1);},[a$1]),a(()=>{typeof m>"u"?t.current.revertToManifestValues(["intermission"]):t.current.setIntermission(m);},[m]),a(()=>{typeof y>"u"||!y?t.current.revertToManifestValues(["defaultTheme"]):t.current.setDefaultTheme(y);},[y]),a(()=>{o&&t.current.play(o);},[o]),a(()=>(typeof C<"u"&&t.current.enterInteractiveMode(C),()=>{t.current.exitInteractiveMode();}),[C]),a(()=>{typeof S<"u"&&t.current.updateSrc(S);},[S]),useEffect(()=>{let n=()=>{e$1==null||e$1(PlayerEvents.Ready);},w=()=>{e$1==null||e$1(PlayerEvents.DataReady);},x=()=>{e$1==null||e$1(PlayerEvents.DataFail);},V=()=>{t.current.currentState!==PlayerState.Playing&&(e$1==null||e$1(PlayerEvents.Complete));},h=()=>{e$1==null||e$1(PlayerEvents.LoopComplete);};return t.current.addEventListener("DOMLoaded",n),t.current.addEventListener("data_ready",w),t.current.addEventListener("data_failed",x),t.current.addEventListener("complete",V),t.current.addEventListener("loopComplete",h),()=>{t.current.removeEventListener("DOMLoaded",n),t.current.removeEventListener("data_ready",w),t.current.removeEventListener("data_failed",x),t.current.removeEventListener("complete",V),t.current.removeEventListener("loopComplete",h);}},[]),useEffect(()=>{switch(T){case PlayerState.Stopped:e$1==null||e$1(PlayerEvents.Stop);break;case PlayerState.Paused:e$1==null||e$1(PlayerEvents.Pause);break;case PlayerState.Playing:e$1==null||e$1(PlayerEvents.Play);break;case PlayerState.Frozen:e$1==null||e$1(PlayerEvents.Freeze);break;case PlayerState.Error:e$1==null||e$1(PlayerEvents.Error);break;}},[T]),useEffect(()=>{e$1==null||e$1(PlayerEvents.Frame,{frame:k,seeker:q});},[k]),c.createElement(e,{value:i},c.createElement("div",{className:`dotlottie-container main ${b?"controls":""} ${j}`,lang:"en",...p&&{"data-testid":p},...I},c.createElement("div",{ref:R,"data-name":`${G}`,role:"figure",className:`animation ${b?"controls":""}`,style:b?N.animationWithControls:N.animation,...p&&{"data-testid":"animation"}},T===PlayerState.Error&&c.createElement("div",{...p&&{"data-testid":"error"},className:"error"},"\u26A0\uFE0F")),b))});

export { fe as a };
//# sourceMappingURL=out.js.map
//# sourceMappingURL=chunk-ZAFYX2AB.js.map